<!DOCTYPE HTML>
<html><head><meta charset="UTF-8"><title>Main</title><style type="text/css">html,head,body { padding:0; margin:0; }body { font-family: helvetica, arial, sans-serif; }</style></head><body><script type="text/javascript" src="/lib/elm-runtime.js"></script><script type="text/javascript"><!-- UI builder -->
 
function UI(){
    this.openHorizontalBox = function(label)
    {
        console.log("openHorizontalBox: " + label);
    }

    this.openVerticalBox = function(label)
    {
        console.log("openVerticalBox: " + label);
    }

    this.closeBox = function()
    {
        console.log("closeBox");
    }

    this.addButton = function(label, handler)
    {
       console.log("addButton: " + label);

       document.addEventListener(label + '-on', function(e) {
            var btnPushTime = 50;

            handler(1);            
            setTimeout(function () {
                    handler(0);                    
                }, btnPushTime);
        });
    }

    this.addCheckButton = function(label, handler)
    {
        console.log("addCheckButton: " + label);
    }

    this.addVerticalSlider = function(label, handler, init, min, max, step)
    {
        console.log("addVerticalSlider: " + label);
    }

    this.addHorizontalSlider = function(label, handler, init, min, max, step)
    {
        console.log("addHorizontalSlider: " + label);

        document.addEventListener(label + '-changed', function(e) {
            handler(e.value);
        });
    }

    this.addNumEntry = function(label, handler, init, min, max, step)
    {
        console.log("addNumEntry: " + label);
    }

    this.addHorizontalBargraph = function(label, handler,  min, max)
    {
        console.log("addHorizontalBargraph: " + label);
    }

    this.addVerticalBargraph = function(label, handler,  min, max)
    {
         console.log("addVerticalBargraph: " + label);
    }

    this.declare = function(handler, key, value)
    {
         console.log("declare");
    }

    return this;
}

<!-- Faust DSP-->

<!-- WebAudio API -->

process_dsp = function(obj)
{
    function process_aux_dsp(event)
    {
        var count;

        /*
        if (event.inputBuffer.numberOfChannels < dsp.getNumInputs()) {
            console.log("Incorrect number of input %d instead of %d", event.inputBuffer.numberOfChannels, dsp.getNumInputs());
            return;
        }
        */

        if (event.outputBuffer.numberOfChannels < obj.dsp.getNumOutputs()) {
            console.log("Incorrect number of output %d instead of %d", event.outputBuffer.numberOfChannels, obj.dsp.getNumOutputs());
            return;
        }

        for (var i = 0; i < obj.dsp.getNumInputs(); i++) {
            obj.inputs[i] = event.inputBuffer.getChannelData(i);
            if (obj.inputs[i] != null) {
                count = obj.inputs[i].length;
            }
        }

        for (var i = 0; i < obj.dsp.getNumOutputs(); i++) {
            obj.outputs[i] = event.outputBuffer.getChannelData(i);
            if (obj.outputs[i] != null) {
                count = obj.outputs[i].length;
            }
        }

        obj.dsp.compute(count, obj.inputs, obj.outputs);

    }
    return process_aux_dsp;
}

function create_dsp(audio_context, user_interface, meta_interface, buffer_size)
{
    this.dsp = new dsp();

    this.dsp.init(audio_context.sampleRate);
    this.dsp.buildUserInterface(user_interface);
    this.dsp.metadata(meta_interface);

    this.inputs = new Array(this.dsp.getNumInputs());
    this.outputs = new Array(this.dsp.getNumOutputs());

    console.log(audio_context.sampleRate);
    console.log(this.dsp.getNumInputs());
    console.log(this.dsp.getNumOutputs());

    this.processor = audio_context.createJavaScriptNode(buffer_size, this.dsp.getNumInputs(), this.dsp.getNumOutputs());
    this.processor.onaudioprocess = process_dsp(this);

    return this;
}

function initAudio(buffer_size)
{
    context = new webkitAudioContext();

    ui = new UI();
    meta = ui;

    faustdsp = new create_dsp(context, ui, meta, buffer_size);
    faustdsp.processor.connect(context.destination);
}

function faustpower2_f(value) {
	return (value * value);
	
}

function dsp() {
	
	this.fRec56 = new Float32Array(2);
	this.fRec55 = new Float32Array(2);
	this.fRec54 = new Float32Array(2);
	this.iRec53 = new Int32Array(2);
	this.fRec52 = new Float32Array(2);
	this.fRec51 = new Float32Array(2);
	this.fRec50 = new Float32Array(2);
	this.iRec49 = new Int32Array(2);
	this.fRec48 = new Float32Array(2);
	this.iRec47 = new Int32Array(2);
	this.fRec46 = new Float32Array(2);
	this.iRec45 = new Int32Array(2);
	this.fRec44 = new Float32Array(2);
	this.fRec43 = new Float32Array(2);
	this.iRec42 = new Int32Array(2);
	this.fRec41 = new Float32Array(2);
	this.fRec40 = new Float32Array(2);
	this.fRec39 = new Float32Array(2);
	this.iRec38 = new Int32Array(2);
	this.fRec37 = new Float32Array(2);
	this.fRec36 = new Float32Array(2);
	this.iRec35 = new Int32Array(2);
	this.fRec34 = new Float32Array(2);
	this.fRec33 = new Float32Array(2);
	this.iRec32 = new Int32Array(2);
	this.fRec31 = new Float32Array(2);
	this.fRec30 = new Float32Array(2);
	this.fRec29 = new Float32Array(2);
	this.iRec28 = new Int32Array(2);
	this.fRec27 = new Float32Array(2);
	this.fRec26 = new Float32Array(2);
	this.fRec25 = new Float32Array(2);
	this.iRec24 = new Int32Array(2);
	this.fRec23 = new Float32Array(2);
	this.fRec22 = new Float32Array(2);
	this.fRec21 = new Float32Array(2);
	this.iRec20 = new Int32Array(2);
	this.fRec19 = new Float32Array(2);
	this.fRec18 = new Float32Array(2);
	this.fRec17 = new Float32Array(2);
	this.iRec16 = new Int32Array(2);
	this.fRec15 = new Float32Array(2);
	this.fRec14 = new Float32Array(2);
	this.fRec13 = new Float32Array(2);
	this.iRec12 = new Int32Array(2);
	this.fRec11 = new Float32Array(2);
	this.fRec10 = new Float32Array(2);
	this.fRec9 = new Float32Array(2);
	this.iRec8 = new Int32Array(2);
	this.fRec7 = new Float32Array(2);
	this.fRec6 = new Float32Array(2);
	this.fRec5 = new Float32Array(2);
	this.iRec4 = new Int32Array(2);
	this.fRec3 = new Float32Array(2);
	this.fRec2 = new Float32Array(2);
	this.fRec1 = new Float32Array(2);
	this.iRec0 = new Int32Array(2);
	this.fhslider0;
	this.fbutton0;
	this.fbutton1;
	this.fbutton2;
	this.fbutton3;
	this.fbutton4;
	this.fbutton5;
	this.fbutton6;
	this.fbutton7;
	this.fbutton8;
	this.fbutton9;
	this.fbutton10;
	this.fbutton11;
	this.fbutton12;
	this.fbutton13;
	this.fbutton14;
	this.fbutton15;
	this.fSamplingFreq;
	
	this.metadata = function(m) { 
	}

	this.getNumInputs = function() { return 0; }
	this.getNumOutputs = function() { return 2; }
	
	this.classInit = function(samplingFreq) {
	}
	
	this.instanceInit = function(samplingFreq) {
		this.fSamplingFreq = samplingFreq;
		this.fhslider0 = 0.6;
		this.fbutton0 = 0;
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.iRec0[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec1[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec2[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec3[i] = 0;
			
		}
		this.fbutton1 = 0;
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.iRec4[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec5[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec6[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec7[i] = 0;
			
		}
		this.fbutton2 = 0;
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.iRec8[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec9[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec10[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec11[i] = 0;
			
		}
		this.fbutton3 = 0;
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.iRec12[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec13[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec14[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec15[i] = 0;
			
		}
		this.fbutton4 = 0;
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.iRec16[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec17[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec18[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec19[i] = 0;
			
		}
		this.fbutton5 = 0;
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.iRec20[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec21[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec22[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec23[i] = 0;
			
		}
		this.fbutton6 = 0;
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.iRec24[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec25[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec26[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec27[i] = 0;
			
		}
		this.fbutton7 = 0;
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.iRec28[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec29[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec30[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec31[i] = 0;
			
		}
		this.fbutton8 = 0;
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.iRec32[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec33[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec34[i] = 0;
			
		}
		this.fbutton9 = 0;
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.iRec35[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec36[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec37[i] = 0;
			
		}
		this.fbutton10 = 0;
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.iRec38[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec39[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec40[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec41[i] = 0;
			
		}
		this.fbutton11 = 0;
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.iRec42[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec43[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec44[i] = 0;
			
		}
		this.fbutton12 = 0;
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.iRec45[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec46[i] = 0;
			
		}
		this.fbutton13 = 0;
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.iRec47[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec48[i] = 0;
			
		}
		this.fbutton14 = 0;
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.iRec49[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec50[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec51[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec52[i] = 0;
			
		}
		this.fbutton15 = 0;
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.iRec53[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec54[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec55[i] = 0;
			
		}
		for (var i = 0; (i < 2); i = (i + 1)) {
			this.fRec56[i] = 0;
			
		}
		
	}
	
	this.init = function(samplingFreq) {
		this.classInit(samplingFreq);
		this.instanceInit(samplingFreq);
	}
	
	this.buildUserInterface = function(ui_interface) {
		ui_interface.openVerticalBox("synth");
		ui_interface.addButton("hand0", function handler(obj) { function setval(val) { obj.fbutton7 = val; } return setval; }(this));
		ui_interface.addButton("hand1", function handler(obj) { function setval(val) { obj.fbutton15 = val; } return setval; }(this));
		ui_interface.addButton("hand10", function handler(obj) { function setval(val) { obj.fbutton2 = val; } return setval; }(this));
		ui_interface.addButton("hand11", function handler(obj) { function setval(val) { obj.fbutton10 = val; } return setval; }(this));
		ui_interface.addButton("hand12", function handler(obj) { function setval(val) { obj.fbutton1 = val; } return setval; }(this));
		ui_interface.addButton("hand13", function handler(obj) { function setval(val) { obj.fbutton9 = val; } return setval; }(this));
		ui_interface.addButton("hand14", function handler(obj) { function setval(val) { obj.fbutton0 = val; } return setval; }(this));
		ui_interface.addButton("hand15", function handler(obj) { function setval(val) { obj.fbutton8 = val; } return setval; }(this));
		ui_interface.addButton("hand2", function handler(obj) { function setval(val) { obj.fbutton6 = val; } return setval; }(this));
		ui_interface.addButton("hand3", function handler(obj) { function setval(val) { obj.fbutton14 = val; } return setval; }(this));
		ui_interface.addButton("hand4", function handler(obj) { function setval(val) { obj.fbutton5 = val; } return setval; }(this));
		ui_interface.addButton("hand5", function handler(obj) { function setval(val) { obj.fbutton13 = val; } return setval; }(this));
		ui_interface.addButton("hand6", function handler(obj) { function setval(val) { obj.fbutton4 = val; } return setval; }(this));
		ui_interface.addButton("hand7", function handler(obj) { function setval(val) { obj.fbutton12 = val; } return setval; }(this));
		ui_interface.addButton("hand8", function handler(obj) { function setval(val) { obj.fbutton3 = val; } return setval; }(this));
		ui_interface.addButton("hand9", function handler(obj) { function setval(val) { obj.fbutton11 = val; } return setval; }(this));
		ui_interface.declare("fhslider0", "osc", "/accxyz/0 -10 10");
		ui_interface.declare("fhslider0", "unit", "f");
		ui_interface.addHorizontalSlider("level", function handler(obj) { function setval(val) { obj.fhslider0 = val; } return setval; }(this), 0.6, 0, 1, 0.01);
		ui_interface.closeBox();
		
	}
	
	this.compute = function(count, inputs, outputs) {
		var output0 = outputs[0];
		var output1 = outputs[1];
		var fSlow0 = faustpower2_f(this.fhslider0);
		var fSlow1 = this.fbutton0;
		var iSlow2 = (fSlow1 > 0);
		var iSlow3 = (fSlow1 <= 0);
		var fSlow4 = this.fbutton1;
		var iSlow5 = (fSlow4 > 0);
		var iSlow6 = (fSlow4 <= 0);
		var fSlow7 = this.fbutton2;
		var iSlow8 = (fSlow7 > 0);
		var iSlow9 = (fSlow7 <= 0);
		var fSlow10 = this.fbutton3;
		var iSlow11 = (fSlow10 > 0);
		var iSlow12 = (fSlow10 <= 0);
		var fSlow13 = this.fbutton4;
		var iSlow14 = (fSlow13 > 0);
		var iSlow15 = (fSlow13 <= 0);
		var fSlow16 = this.fbutton5;
		var iSlow17 = (fSlow16 > 0);
		var iSlow18 = (fSlow16 <= 0);
		var fSlow19 = this.fbutton6;
		var iSlow20 = (fSlow19 > 0);
		var iSlow21 = (fSlow19 <= 0);
		var fSlow22 = this.fbutton7;
		var iSlow23 = (fSlow22 > 0);
		var iSlow24 = (fSlow22 <= 0);
		var fSlow25 = this.fbutton8;
		var iSlow26 = (fSlow25 > 0);
		var iSlow27 = (fSlow25 <= 0);
		var fSlow28 = this.fbutton9;
		var iSlow29 = (fSlow28 > 0);
		var iSlow30 = (fSlow28 <= 0);
		var fSlow31 = this.fbutton10;
		var iSlow32 = (fSlow31 > 0);
		var iSlow33 = (fSlow31 <= 0);
		var fSlow34 = this.fbutton11;
		var iSlow35 = (fSlow34 > 0);
		var iSlow36 = (fSlow34 <= 0);
		var fSlow37 = this.fbutton12;
		var iSlow38 = (fSlow37 > 0);
		var iSlow39 = (fSlow37 <= 0);
		var fSlow40 = this.fbutton13;
		var iSlow41 = (fSlow40 > 0);
		var iSlow42 = (fSlow40 <= 0);
		var fSlow43 = this.fbutton14;
		var iSlow44 = (fSlow43 > 0);
		var iSlow45 = (fSlow43 <= 0);
		var fSlow46 = this.fbutton15;
		var iSlow47 = (fSlow46 > 0);
		var iSlow48 = (fSlow46 <= 0);
		for (var i = 0; (i < count); i = (i + 1)) {
			this.iRec0[0] = (iSlow2 & (this.iRec0[1] | (this.fRec1[1] >= 1)));
			var iTemp0 = (iSlow3 & (this.fRec1[1] > 0));
			this.fRec1[0] = (((iTemp0 == 0) | (this.fRec1[1] >= 1e-06)) * ((0.000226757 * (((this.iRec0[1] == 0) & iSlow2) & (this.fRec1[1] < 1))) + (this.fRec1[1] * ((1 - (0 - (0.00198929 * (this.iRec0[1] & (this.fRec1[1] > 80))))) - (0.000511877 * iTemp0)))));
			this.fRec2[0] = function fmod(a,b) {return a % b }((0.0694861 + this.fRec2[1]), 1);
			this.fRec3[0] = function fmod(a,b) {return a % b }((0.0347431 + this.fRec3[1]), 1);
			this.iRec4[0] = (iSlow5 & (this.iRec4[1] | (this.fRec5[1] >= 1)));
			var iTemp1 = (iSlow6 & (this.fRec5[1] > 0));
			this.fRec5[0] = (((iTemp1 == 0) | (this.fRec5[1] >= 1e-06)) * ((0.000226757 * (((this.iRec4[1] == 0) & iSlow5) & (this.fRec5[1] < 1))) + (this.fRec5[1] * ((1 - (0 - (0.00198929 * (this.iRec4[1] & (this.fRec5[1] > 80))))) - (0.000511877 * iTemp1)))));
			this.fRec6[0] = function fmod(a,b) {return a % b }((0.0263303 + this.fRec6[1]), 1);
			var fTemp2 = Math.sin((6.28319 * this.fRec6[0]));
			this.fRec7[0] = function fmod(a,b) {return a % b }((0.0526606 + this.fRec7[1]), 1);
			this.iRec8[0] = (iSlow8 & (this.iRec8[1] | (this.fRec9[1] >= 1)));
			var iTemp3 = (iSlow9 & (this.fRec9[1] > 0));
			this.fRec9[0] = (((iTemp3 == 0) | (this.fRec9[1] >= 1e-06)) * ((0.000226757 * (((this.iRec8[1] == 0) & iSlow8) & (this.fRec9[1] < 1))) + (this.fRec9[1] * ((1 - (0 - (0.00198929 * (this.iRec8[1] & (this.fRec9[1] > 80))))) - (0.000511877 * iTemp3)))));
			this.fRec10[0] = function fmod(a,b) {return a % b }((0.0199546 + this.fRec10[1]), 1);
			var fTemp4 = Math.sin((6.28319 * this.fRec10[0]));
			this.fRec11[0] = function fmod(a,b) {return a % b }((0.0399093 + this.fRec11[1]), 1);
			var fTemp5 = Math.sin((6.28319 * this.fRec11[0]));
			this.iRec12[0] = (iSlow11 & (this.iRec12[1] | (this.fRec13[1] >= 1)));
			var iTemp6 = (iSlow12 & (this.fRec13[1] > 0));
			this.fRec13[0] = (((iTemp6 == 0) | (this.fRec13[1] >= 1e-06)) * ((0.000226757 * (((this.iRec12[1] == 0) & iSlow11) & (this.fRec13[1] < 1))) + (this.fRec13[1] * ((1 - (0 - (0.00198929 * (this.iRec12[1] & (this.fRec13[1] > 80))))) - (0.000511877 * iTemp6)))));
			this.fRec14[0] = function fmod(a,b) {return a % b }((0.0302456 + this.fRec14[1]), 1);
			var fTemp7 = Math.sin((6.28319 * this.fRec14[0]));
			this.fRec15[0] = function fmod(a,b) {return a % b }((0.0151228 + this.fRec15[1]), 1);
			this.iRec16[0] = (iSlow14 & (this.iRec16[1] | (this.fRec17[1] >= 1)));
			var iTemp8 = (iSlow15 & (this.fRec17[1] > 0));
			this.fRec17[0] = (((iTemp8 == 0) | (this.fRec17[1] >= 1e-06)) * ((0.000226757 * (((this.iRec16[1] == 0) & iSlow14) & (this.fRec17[1] < 1))) + (this.fRec17[1] * ((1 - (0 - (0.00198929 * (this.iRec16[1] & (this.fRec17[1] > 80))))) - (0.000511877 * iTemp8)))));
			this.fRec18[0] = function fmod(a,b) {return a % b }((0.0229219 + this.fRec18[1]), 1);
			this.fRec19[0] = function fmod(a,b) {return a % b }((0.0114609 + this.fRec19[1]), 1);
			this.iRec20[0] = (iSlow17 & (this.iRec20[1] | (this.fRec21[1] >= 1)));
			var iTemp9 = (iSlow18 & (this.fRec21[1] > 0));
			this.fRec21[0] = (((iTemp9 == 0) | (this.fRec21[1] >= 1e-06)) * ((0.000226757 * (((this.iRec20[1] == 0) & iSlow17) & (this.fRec21[1] < 1))) + (this.fRec21[1] * ((1 - (0 - (0.00198929 * (this.iRec20[1] & (this.fRec21[1] > 80))))) - (0.000511877 * iTemp9)))));
			this.fRec22[0] = function fmod(a,b) {return a % b }((0.0173715 + this.fRec22[1]), 1);
			var fTemp10 = Math.sin((6.28319 * this.fRec22[0]));
			this.fRec23[0] = function fmod(a,b) {return a % b }((0.00868576 + this.fRec23[1]), 1);
			this.iRec24[0] = (iSlow20 & (this.iRec24[1] | (this.fRec25[1] >= 1)));
			var iTemp11 = (iSlow21 & (this.fRec25[1] > 0));
			this.fRec25[0] = (((iTemp11 == 0) | (this.fRec25[1] >= 1e-06)) * ((0.000226757 * (((this.iRec24[1] == 0) & iSlow20) & (this.fRec25[1] < 1))) + (this.fRec25[1] * ((1 - (0 - (0.00198929 * (this.iRec24[1] & (this.fRec25[1] > 80))))) - (0.000511877 * iTemp11)))));
			this.fRec26[0] = function fmod(a,b) {return a % b }((0.0131652 + this.fRec26[1]), 1);
			var fTemp12 = Math.sin((6.28319 * this.fRec26[0]));
			this.fRec27[0] = function fmod(a,b) {return a % b }((0.00658258 + this.fRec27[1]), 1);
			this.iRec28[0] = (iSlow23 & (this.iRec28[1] | (this.fRec29[1] >= 1)));
			var iTemp13 = (iSlow24 & (this.fRec29[1] > 0));
			this.fRec29[0] = (((iTemp13 == 0) | (this.fRec29[1] >= 1e-06)) * ((0.000226757 * (((this.iRec28[1] == 0) & iSlow23) & (this.fRec29[1] < 1))) + (this.fRec29[1] * ((1 - (0 - (0.00198929 * (this.iRec28[1] & (this.fRec29[1] > 80))))) - (0.000511877 * iTemp13)))));
			this.fRec30[0] = function fmod(a,b) {return a % b }((0.00997732 + this.fRec30[1]), 1);
			var fTemp14 = Math.sin((6.28319 * this.fRec30[0]));
			this.fRec31[0] = function fmod(a,b) {return a % b }((0.00498866 + this.fRec31[1]), 1);
			output0[i] = (fSlow0 * ((this.fRec1[0] * ((0.5 * Math.sin((6.28319 * this.fRec2[0]))) + Math.sin((6.28319 * this.fRec3[0])))) + ((this.fRec5[0] * (fTemp2 + (0.5 * Math.sin((6.28319 * this.fRec7[0]))))) + ((this.fRec9[0] * (fTemp4 + (0.5 * fTemp5))) + ((this.fRec13[0] * ((0.5 * fTemp7) + Math.sin((6.28319 * this.fRec15[0])))) + ((this.fRec17[0] * ((0.5 * Math.sin((6.28319 * this.fRec18[0]))) + Math.sin((6.28319 * this.fRec19[0])))) + ((this.fRec21[0] * ((0.5 * fTemp10) + Math.sin((6.28319 * this.fRec23[0])))) + ((this.fRec25[0] * ((0.5 * fTemp12) + Math.sin((6.28319 * this.fRec27[0])))) + (this.fRec29[0] * ((0.5 * fTemp14) + Math.sin((6.28319 * this.fRec31[0]))))))))))));
			this.iRec32[0] = (iSlow26 & (this.iRec32[1] | (this.fRec33[1] >= 1)));
			var iTemp15 = (iSlow27 & (this.fRec33[1] > 0));
			this.fRec33[0] = (((iTemp15 == 0) | (this.fRec33[1] >= 1e-06)) * ((0.000226757 * (((this.iRec32[1] == 0) & iSlow26) & (this.fRec33[1] < 1))) + (this.fRec33[1] * ((1 - (0 - (0.00198929 * (this.iRec32[1] & (this.fRec33[1] > 80))))) - (0.000511877 * iTemp15)))));
			this.fRec34[0] = function fmod(a,b) {return a % b }((0.0798186 + this.fRec34[1]), 1);
			this.iRec35[0] = (iSlow29 & (this.iRec35[1] | (this.fRec36[1] >= 1)));
			var iTemp16 = (iSlow30 & (this.fRec36[1] > 0));
			this.fRec36[0] = (((iTemp16 == 0) | (this.fRec36[1] >= 1e-06)) * ((0.000226757 * (((this.iRec35[1] == 0) & iSlow29) & (this.fRec36[1] < 1))) + (this.fRec36[1] * ((1 - (0 - (0.00198929 * (this.iRec35[1] & (this.fRec36[1] > 80))))) - (0.000511877 * iTemp16)))));
			this.fRec37[0] = function fmod(a,b) {return a % b }((0.0604912 + this.fRec37[1]), 1);
			this.iRec38[0] = (iSlow32 & (this.iRec38[1] | (this.fRec39[1] >= 1)));
			var iTemp17 = (iSlow33 & (this.fRec39[1] > 0));
			this.fRec39[0] = (((iTemp17 == 0) | (this.fRec39[1] >= 1e-06)) * ((0.000226757 * (((this.iRec38[1] == 0) & iSlow32) & (this.fRec39[1] < 1))) + (this.fRec39[1] * ((1 - (0 - (0.00198929 * (this.iRec38[1] & (this.fRec39[1] > 80))))) - (0.000511877 * iTemp17)))));
			this.fRec40[0] = function fmod(a,b) {return a % b }((0.0458437 + this.fRec40[1]), 1);
			this.fRec41[0] = function fmod(a,b) {return a % b }((0.0229219 + this.fRec41[1]), 1);
			this.iRec42[0] = (iSlow35 & (this.iRec42[1] | (this.fRec43[1] >= 1)));
			var iTemp18 = (iSlow36 & (this.fRec43[1] > 0));
			this.fRec43[0] = (((iTemp18 == 0) | (this.fRec43[1] >= 1e-06)) * ((0.000226757 * (((this.iRec42[1] == 0) & iSlow35) & (this.fRec43[1] < 1))) + (this.fRec43[1] * ((1 - (0 - (0.00198929 * (this.iRec42[1] & (this.fRec43[1] > 80))))) - (0.000511877 * iTemp18)))));
			this.fRec44[0] = function fmod(a,b) {return a % b }((0.0347431 + this.fRec44[1]), 1);
			this.iRec45[0] = (iSlow38 & (this.iRec45[1] | (this.fRec46[1] >= 1)));
			var iTemp19 = (iSlow39 & (this.fRec46[1] > 0));
			this.fRec46[0] = (((iTemp19 == 0) | (this.fRec46[1] >= 1e-06)) * ((0.000226757 * (((this.iRec45[1] == 0) & iSlow38) & (this.fRec46[1] < 1))) + (this.fRec46[1] * ((1 - (0 - (0.00198929 * (this.iRec45[1] & (this.fRec46[1] > 80))))) - (0.000511877 * iTemp19)))));
			this.iRec47[0] = (iSlow41 & (this.iRec47[1] | (this.fRec48[1] >= 1)));
			var iTemp20 = (iSlow42 & (this.fRec48[1] > 0));
			this.fRec48[0] = (((iTemp20 == 0) | (this.fRec48[1] >= 1e-06)) * ((0.000226757 * (((this.iRec47[1] == 0) & iSlow41) & (this.fRec48[1] < 1))) + (this.fRec48[1] * ((1 - (0 - (0.00198929 * (this.iRec47[1] & (this.fRec48[1] > 80))))) - (0.000511877 * iTemp20)))));
			this.iRec49[0] = (iSlow44 & (this.iRec49[1] | (this.fRec50[1] >= 1)));
			var iTemp21 = (iSlow45 & (this.fRec50[1] > 0));
			this.fRec50[0] = (((iTemp21 == 0) | (this.fRec50[1] >= 1e-06)) * ((0.000226757 * (((this.iRec49[1] == 0) & iSlow44) & (this.fRec50[1] < 1))) + (this.fRec50[1] * ((1 - (0 - (0.00198929 * (this.iRec49[1] & (this.fRec50[1] > 80))))) - (0.000511877 * iTemp21)))));
			this.fRec51[0] = function fmod(a,b) {return a % b }((0.0151228 + this.fRec51[1]), 1);
			this.fRec52[0] = function fmod(a,b) {return a % b }((0.0075614 + this.fRec52[1]), 1);
			this.iRec53[0] = (iSlow47 & (this.iRec53[1] | (this.fRec54[1] >= 1)));
			var iTemp22 = (iSlow48 & (this.fRec54[1] > 0));
			this.fRec54[0] = (((iTemp22 == 0) | (this.fRec54[1] >= 1e-06)) * ((0.000226757 * (((this.iRec53[1] == 0) & iSlow47) & (this.fRec54[1] < 1))) + (this.fRec54[1] * ((1 - (0 - (0.00198929 * (this.iRec53[1] & (this.fRec54[1] > 80))))) - (0.000511877 * iTemp22)))));
			this.fRec55[0] = function fmod(a,b) {return a % b }((0.0114609 + this.fRec55[1]), 1);
			this.fRec56[0] = function fmod(a,b) {return a % b }((0.00573047 + this.fRec56[1]), 1);
			output1[i] = (fSlow0 * ((this.fRec33[0] * ((0.5 * Math.sin((6.28319 * this.fRec34[0]))) + fTemp5)) + ((this.fRec36[0] * ((0.5 * Math.sin((6.28319 * this.fRec37[0]))) + fTemp7)) + ((this.fRec39[0] * ((0.5 * Math.sin((6.28319 * this.fRec40[0]))) + Math.sin((6.28319 * this.fRec41[0])))) + ((this.fRec43[0] * ((0.5 * Math.sin((6.28319 * this.fRec44[0]))) + fTemp10)) + ((this.fRec46[0] * ((0.5 * fTemp2) + fTemp12)) + ((this.fRec48[0] * ((0.5 * fTemp4) + fTemp14)) + ((this.fRec50[0] * ((0.5 * Math.sin((6.28319 * this.fRec51[0]))) + Math.sin((6.28319 * this.fRec52[0])))) + (this.fRec54[0] * ((0.5 * Math.sin((6.28319 * this.fRec55[0]))) + Math.sin((6.28319 * this.fRec56[0]))))))))))));
			this.iRec0[1] = this.iRec0[0];
			this.fRec1[1] = this.fRec1[0];
			this.fRec2[1] = this.fRec2[0];
			this.fRec3[1] = this.fRec3[0];
			this.iRec4[1] = this.iRec4[0];
			this.fRec5[1] = this.fRec5[0];
			this.fRec6[1] = this.fRec6[0];
			this.fRec7[1] = this.fRec7[0];
			this.iRec8[1] = this.iRec8[0];
			this.fRec9[1] = this.fRec9[0];
			this.fRec10[1] = this.fRec10[0];
			this.fRec11[1] = this.fRec11[0];
			this.iRec12[1] = this.iRec12[0];
			this.fRec13[1] = this.fRec13[0];
			this.fRec14[1] = this.fRec14[0];
			this.fRec15[1] = this.fRec15[0];
			this.iRec16[1] = this.iRec16[0];
			this.fRec17[1] = this.fRec17[0];
			this.fRec18[1] = this.fRec18[0];
			this.fRec19[1] = this.fRec19[0];
			this.iRec20[1] = this.iRec20[0];
			this.fRec21[1] = this.fRec21[0];
			this.fRec22[1] = this.fRec22[0];
			this.fRec23[1] = this.fRec23[0];
			this.iRec24[1] = this.iRec24[0];
			this.fRec25[1] = this.fRec25[0];
			this.fRec26[1] = this.fRec26[0];
			this.fRec27[1] = this.fRec27[0];
			this.iRec28[1] = this.iRec28[0];
			this.fRec29[1] = this.fRec29[0];
			this.fRec30[1] = this.fRec30[0];
			this.fRec31[1] = this.fRec31[0];
			this.iRec32[1] = this.iRec32[0];
			this.fRec33[1] = this.fRec33[0];
			this.fRec34[1] = this.fRec34[0];
			this.iRec35[1] = this.iRec35[0];
			this.fRec36[1] = this.fRec36[0];
			this.fRec37[1] = this.fRec37[0];
			this.iRec38[1] = this.iRec38[0];
			this.fRec39[1] = this.fRec39[0];
			this.fRec40[1] = this.fRec40[0];
			this.fRec41[1] = this.fRec41[0];
			this.iRec42[1] = this.iRec42[0];
			this.fRec43[1] = this.fRec43[0];
			this.fRec44[1] = this.fRec44[0];
			this.iRec45[1] = this.iRec45[0];
			this.fRec46[1] = this.fRec46[0];
			this.iRec47[1] = this.iRec47[0];
			this.fRec48[1] = this.fRec48[0];
			this.iRec49[1] = this.iRec49[0];
			this.fRec50[1] = this.fRec50[0];
			this.fRec51[1] = this.fRec51[0];
			this.fRec52[1] = this.fRec52[0];
			this.iRec53[1] = this.iRec53[0];
			this.fRec54[1] = this.fRec54[0];
			this.fRec55[1] = this.fRec55[0];
			this.fRec56[1] = this.fRec56[0];
			
		}
		
	}
	
}

gol = [];
row = [];
function initHelper() {
    var e = document.createEvent('Event');
    e.initEvent('provideHost', true, true);
    e.value = window.location.host;
    document.dispatchEvent(e);

    var presetSn = window.location.pathname.match(/\/preset\/(.*)/);
    if (presetSn !== null) {
        e = document.createEvent('Event');
	    e.initEvent('providePresetUrl', true, true);
	    e.value = "http://" + window.location.host + "/api" + presetSn[0];
	    document.dispatchEvent(e);
    }

    document.addEventListener('onGolStep', function(e) {
        gol = e.value;
    });

    document.addEventListener('onSequencerStep', function(e) {
        row = e.value;

        if (row[0] == null){
            return;
        }        
        //var note = Math.max.apply(Math, row.map(function (pair) { return pair[1]; }));
        var notes = row.map(function (pair) { return pair[1]; });
        for (var i = 0; i < notes.length; i++) {
            ep = document.createEvent('Event');
            ep.initEvent('hand'+ (notes[i]) +'-on', true, true);
            document.dispatchEvent(ep);
        };
    });
};document.body.onload = function() {
    initAudio(4096);
    initHelper();
}
try{

if (Elm.Common) throw "Module name collision, 'Common' is already defined."; 
Elm.Common=function(){
 var $op={};
 for(Elm['i'] in Elm){eval('var '+Elm['i']+'=Elm[Elm.i];');}
 try{
  if (!(Elm.Prelude instanceof Object)) throw 'module not found';
 } catch(e) {
  throw ("Module 'Prelude' is missing. Compile with --make flag or load missing module in a separate JavaScript file.");
 }
 var hiddenVars={};
 for (Elm['i'] in Elm.Prelude) {
  if (hiddenVars[Elm['i']]) continue;
  eval('var ' + Elm['i'] + ' = Elm.Prelude[Elm.i];');}
 function percent_0(x_3){
  return function(p_4){
   return div((x_3*p_4))(100);};}
 function repeat_1(a_5){
  return function(n_6){
   return map(function(__7){
    return a_5;})(function(){
    var lo=1;
    var hi=n_6;
    var lst=["Nil"];if(lo<=hi){do{lst=['Cons',hi,lst]}while(hi-->lo)}
    return lst;}());};}
 function grid_2(size_8){
  return concatMap(function(c_9){
   return zip(repeat_1(c_9)(size_8))(function(){
    var lo=1;
    var hi=size_8;
    var lst=["Nil"];if(lo<=hi){do{lst=['Cons',hi,lst]}while(hi-->lo)}
    return lst;}());})(function(){
   var lo=1;
   var hi=size_8;
   var lst=["Nil"];if(lo<=hi){do{lst=['Cons',hi,lst]}while(hi-->lo)}
   return lst;}());}
 return {$op : {},
 percent:percent_0,
 repeat:repeat_1,
 grid:grid_2};}();
Elm.main=function(){
 return Elm.Common.main;};
} catch (e) {
Elm.main=function() {
var msg = ('<br/><h2>Your browser may not be supported. Are you using a modern browser?</h2>' + '<br/><span style="color:grey">Runtime Error in Common module:<br/>' + e + '</span>');
document.body.innerHTML = Elm.Text.monospace(msg);throw e;};}
try{

if (Elm.GameOfLife) throw "Module name collision, 'GameOfLife' is already defined."; 
Elm.GameOfLife=function(){
 var $op={};
 for(Elm['i'] in Elm){eval('var '+Elm['i']+'=Elm[Elm.i];');}
 try{
  if (!(Elm.Prelude instanceof Object)) throw 'module not found';
 } catch(e) {
  throw ("Module 'Prelude' is missing. Compile with --make flag or load missing module in a separate JavaScript file.");
 }
 var hiddenVars={};
 for (Elm['i'] in Elm.Prelude) {
  if (hiddenVars[Elm['i']]) continue;
  eval('var ' + Elm['i'] + ' = Elm.Prelude[Elm.i];');}
 try{
  if (!(Elm.Common instanceof Object)) throw 'module not found';
 } catch(e) {
  throw ("Module 'Common' is missing. Compile with --make flag or load missing module in a separate JavaScript file.");
 }
 var Common=Elm.Common;
 function countNghb_8(Tuple2$xy_12){
  return function(gof_13){
   return function(){
   switch(Tuple2$xy_12[0]){
    case 'Tuple2':
    return length(filter(function(Tuple2$nxny_16){
     return function(){
     switch(Tuple2$nxny_16[0]){
      case 'Tuple2':
      return alive_0(['Tuple2',(Tuple2$xy_12[1]+Tuple2$nxny_16[1]),(Tuple2$xy_12[2]+Tuple2$nxny_16[2])])(gof_13);
     }
     throw "Non-exhaustive pattern match in case";}();})(adjacentOffsets_7));
   }
   throw "Non-exhaustive pattern match in case";}();};}
 function emptyNghb_9(Tuple2$xy_19){
  return function(gof_20){
   return function(){
   switch(Tuple2$xy_19[0]){
    case 'Tuple2':
    return filter(function(x){
     return not(flip(alive_0)(gof_20)(x));})(map(function(Tuple2$nxny_23){
     return function(){
     switch(Tuple2$nxny_23[0]){
      case 'Tuple2':
      return ['Tuple2',(Tuple2$xy_19[1]+Tuple2$nxny_23[1]),(Tuple2$xy_19[2]+Tuple2$nxny_23[2])];
     }
     throw "Non-exhaustive pattern match in case";}();})(adjacentOffsets_7));
   }
   throw "Non-exhaustive pattern match in case";}();};}
 function step_10(initGof_26){
  return function(){
   var emptyCells_28=fromList_2(concatMap(flip(emptyNghb_9)(initGof_26))(toList_3(initGof_26)));
   var survived_29=Set.foldl(function(cell_34){
    return function(gof__35){
     return (survives_27(cell_34)(initGof_26)?insert_4(cell_34)(gof__35):gof__35);};})(empty_1)(initGof_26);
   var newborn_30=Set.foldl(function(cell_36){
    return function(gof__37){
     return (eq(countNghb_8(cell_36)(initGof_26),3)?insert_4(cell_36)(gof__37):gof__37);};})(empty_1)(emptyCells_28);
   function survives_27(cell_31){
    return function(gof_32){
     return function(){
      var count_33=countNghb_8(cell_31)(gof_32);
      return (eq(count_33,2)||eq(count_33,3));}();};}
   return Set.union(survived_29)(newborn_30);}();}
 function limit_11(gof_38){
  return function(size_39){
   return function(){
    var mask_40=Set.fromList(Common.grid(size_39));
    return Set.intersect(gof_38)(mask_40);}();};}
 var alive_0=Set.member;
 var empty_1=Set.empty;
 var fromList_2=Set.fromList;
 var toList_3=Set.toList;
 var insert_4=Set.insert;
 var diff_5=Set.diff;
 var remove_6=Set.remove;
 var adjacentOffsets_7=['Cons',['Tuple2',-1,0],['Cons',['Tuple2',-1,-1],['Cons',['Tuple2',0,-1],['Cons',['Tuple2',1,-1],['Cons',['Tuple2',1,0],['Cons',['Tuple2',1,1],['Cons',['Tuple2',0,1],['Cons',['Tuple2',-1,1],['Nil']]]]]]]]];
 return {$op : {},
 alive:alive_0,
 empty:empty_1,
 fromList:fromList_2,
 toList:toList_3,
 insert:insert_4,
 diff:diff_5,
 remove:remove_6,
 step:step_10,
 limit:limit_11};}();
Elm.main=function(){
 return Elm.GameOfLife.main;};
} catch (e) {
Elm.main=function() {
var msg = ('<br/><h2>Your browser may not be supported. Are you using a modern browser?</h2>' + '<br/><span style="color:grey">Runtime Error in GameOfLife module:<br/>' + e + '<br/><br/>The problem may stem from an improper usage of:<br/>Common.grid</span>');
document.body.innerHTML = Elm.Text.monospace(msg);throw e;};}
try{

if (Elm.Main) throw "Module name collision, 'Main' is already defined."; 
Elm.Main=function(){
 var $op={};
 for(Elm['i'] in Elm){eval('var '+Elm['i']+'=Elm[Elm.i];');}
 try{
  if (!(Elm.Prelude instanceof Object)) throw 'module not found';
 } catch(e) {
  throw ("Module 'Prelude' is missing. Compile with --make flag or load missing module in a separate JavaScript file.");
 }
 var hiddenVars={};
 for (Elm['i'] in Elm.Prelude) {
  if (hiddenVars[Elm['i']]) continue;
  eval('var ' + Elm['i'] + ' = Elm.Prelude[Elm.i];');}
 try{
  if (!(Elm.Window instanceof Object)) throw 'module not found';
 } catch(e) {
  throw ("Module 'Window' is missing. Compile with --make flag or load missing module in a separate JavaScript file.");
 }
 var dimensions=Elm.Window.dimensions;
 try{
  if (!(Elm.Mouse instanceof Object)) throw 'module not found';
 } catch(e) {
  throw ("Module 'Mouse' is missing. Compile with --make flag or load missing module in a separate JavaScript file.");
 }
 var clicks=Elm.Mouse.clicks;
 var position=Elm.Mouse.position;
 try{
  if (!(Elm.Maybe instanceof Object)) throw 'module not found';
 } catch(e) {
  throw ("Module 'Maybe' is missing. Compile with --make flag or load missing module in a separate JavaScript file.");
 }
 var mapMaybe=Elm.Maybe.mapMaybe;
 try{
  if (!(Elm.Time instanceof Object)) throw 'module not found';
 } catch(e) {
  throw ("Module 'Time' is missing. Compile with --make flag or load missing module in a separate JavaScript file.");
 }
 var every=Elm.Time.every;
 try{
  if (!(Elm.Automaton instanceof Object)) throw 'module not found';
 } catch(e) {
  throw ("Module 'Automaton' is missing. Compile with --make flag or load missing module in a separate JavaScript file.");
 }
 var hiddenVars={};
 for (Elm['i'] in Elm.Automaton) {
  if (hiddenVars[Elm['i']]) continue;
  eval('var ' + Elm['i'] + ' = Elm.Automaton[Elm.i];');}
 try{
  if (!(Elm.JavaScript instanceof Object)) throw 'module not found';
 } catch(e) {
  throw ("Module 'JavaScript' is missing. Compile with --make flag or load missing module in a separate JavaScript file.");
 }
 var hiddenVars={};
 for (Elm['i'] in Elm.JavaScript) {
  if (hiddenVars[Elm['i']]) continue;
  eval('var ' + Elm['i'] + ' = Elm.JavaScript[Elm.i];');}
 try{
  if (!(Elm.JSON instanceof Object)) throw 'module not found';
 } catch(e) {
  throw ("Module 'JSON' is missing. Compile with --make flag or load missing module in a separate JavaScript file.");
 }
 var JSON=Elm.JSON;
 try{
  if (!(Elm.HTTP instanceof Object)) throw 'module not found';
 } catch(e) {
  throw ("Module 'HTTP' is missing. Compile with --make flag or load missing module in a separate JavaScript file.");
 }
 var sendGet=Elm.HTTP.sendGet;
 try{
  if (!(Elm.GameOfLife instanceof Object)) throw 'module not found';
 } catch(e) {
  throw ("Module 'GameOfLife' is missing. Compile with --make flag or load missing module in a separate JavaScript file.");
 }
 var GameOfLife=Elm.GameOfLife;
 try{
  if (!(Elm.Input instanceof Object)) throw 'module not found';
 } catch(e) {
  throw ("Module 'Input' is missing. Compile with --make flag or load missing module in a separate JavaScript file.");
 }
 var checkbox=Elm.Input.checkbox;
 function Preset_17(a1){
  return function(a2){
   return function(a3){
    return ['Preset',a1,a2,a3];};};}
 var jsHost_13=Elm.Signal.constant(castStringToJSString(Value.str('')));
 Value.addListener(document, 'provideHost', function(e) { Dispatcher.notify(jsHost_13.id, e.value); });
 var presetUrl_14=Elm.Signal.constant(castStringToJSString(Value.str('')));
 Value.addListener(document, 'providePresetUrl', function(e) { Dispatcher.notify(presetUrl_14.id, e.value); });
 function placeholder_0(w_46){
  return function(h_47){
   return function(col_48){
    return function(text_49){
     return color(col_48)(container(w_46)(h_47)(middle)(plainText(text_49)));};};};}
 function repeat_1(a_50){
  return function(n_51){
   return map(function(__52){
    return a_50;})(function(){
    var lo=1;
    var hi=n_51;
    var lst=["Nil"];if(lo<=hi){do{lst=['Cons',hi,lst]}while(hi-->lo)}
    return lst;}());};}
 function percent_2(x_53){
  return function(p_54){
   return div((x_53*p_54))(100);};}
 function getPoint_18(asocList_55){
  return function(){
  switch(asocList_55[0]){
   case 'Cons':
   switch(asocList_55[1][0]){
    case 'Tuple2':
    switch(asocList_55[1][2][0]){
     case 'JsonNumber':
     switch(asocList_55[2][0]){
      case 'Cons':
      switch(asocList_55[2][1][0]){
       case 'Tuple2':
       switch(asocList_55[2][1][2][0]){
        case 'JsonNumber':
        switch(asocList_55[2][2][0]){
         case 'Nil':
         return Just(['Tuple2',asocList_55[1][2][1],asocList_55[2][1][2][1]]);
        }break;
       }break;
      }break;
     }break;
    }break;
   }break;
  }
  return Nothing;}();}
 function getValue_19(obj_58){
  return function(){
  switch(obj_58[0]){
   case 'JsonObject':
   return obj_58[1];
  }
  return JSON.empty;}();}
 function handleResponse_20(res_60){
  return function(){
  switch(res_60[0]){
   case 'Failure':
   return JSON.empty;
   case 'Success':
   return JSON.fromString(res_60[1]);
   case 'Waiting':
   return JSON.empty;
  }
  throw "Non-exhaustive pattern match in case";}();}
 function castPointListToJSArray_33(xs_106){
  return castListToJSArray(map(function(Tuple2$xy_107){
   return function(){
   switch(Tuple2$xy_107[0]){
    case 'Tuple2':
    return castTupleToJSTuple2(['Tuple2',castIntToJSNumber(Tuple2$xy_107[1]),castIntToJSNumber(Tuple2$xy_107[2])]);
   }
   throw "Non-exhaustive pattern match in case";}();})(xs_106));}
 function gofCell_38(w_135){
  return function(h_136){
   return function(Tuple2$xy_137){
    return function(){
    switch(Tuple2$xy_137[0]){
     case 'Tuple2':
     return filled(palColorAccent_8)(rect(w_135)(h_136)(['Tuple2',Tuple2$xy_137[1],Tuple2$xy_137[2]]));
    }
    throw "Non-exhaustive pattern match in case";}();};};}
 function noCell_39(w_140){
  return function(h_141){
   return function(Tuple2$xy_142){
    return function(){
    switch(Tuple2$xy_142[0]){
     case 'Tuple2':
     return filled(palColor31_7)(rect(w_140)(h_141)(['Tuple2',Tuple2$xy_142[1],Tuple2$xy_142[2]]));
    }
    throw "Non-exhaustive pattern match in case";}();};};}
 function synthCtrl_40(w_145){
  return function(h_146){
   return placeholder_0(w_145)(h_146)(palColor22_6)(Value.str('Sythesizer controls'));};}
 function golCtrl_41(w_147){
  return function(h_148){
   return color(palColor22_6)(container(w_147)(h_148)(middle)(above(plainText('Gof controls'))(beside(plainText('Active'))(golControl_30))));};}
 function presets_42(w_149){
  return function(h_150){
   return function(presetName_151){
    return placeholder_0(w_149)(h_150)(palColor22_6)(presetName_151);};};}
 function sequencer_43(w_152){
  return function(h_153){
   return function(activeCells_154){
    return function(seqStep_155){
     return function(){
      var cellSize_156=(toFloat(h_153)/sequencerSteps_11);
      var grid_158=concatMap(function(c_162){
       return zip(repeat_1(c_162)(sequencerSteps_11))(map(coordinate_157)(function(){
        var lo=1;
        var hi=sequencerSteps_11;
        var lst=["Nil"];if(lo<=hi){do{lst=['Cons',hi,lst]}while(hi-->lo)}
        return lst;}()));})(map(coordinate_157)(function(){
       var lo=1;
       var hi=sequencerSteps_11;
       var lst=["Nil"];if(lo<=hi){do{lst=['Cons',hi,lst]}while(hi-->lo)}
       return lst;}()));
      var inactiveCells_159=map(noCell_39((cellSize_156*0.8))((cellSize_156*0.8)))(grid_158);
      var stepIndicator_160=filled(palColorBlink_9)(rect(cellSize_156)(h_153)(['Tuple2',coordinate_157(seqStep_155),div(h_153)(2)]));
      function coordinate_157(x_161){
       return ((cellSize_156*toFloat(x_161))-(cellSize_156*0.5));}
      return collage(w_152)(h_153)(Value.append(inactiveCells_159,['Cons',stepIndicator_160,map(gofCell_38((cellSize_156*0.8))((cellSize_156*0.8)))(map(function(Tuple2$xy_163){
       return function(){
       switch(Tuple2$xy_163[0]){
        case 'Tuple2':
        return ['Tuple2',coordinate_157(Tuple2$xy_163[1]),coordinate_157(Tuple2$xy_163[2])];
       }
       throw "Non-exhaustive pattern match in case";}();})(activeCells_154))]));}();};};};}
 function view_44(Tuple4$whlayoutWidthgameHeight_166){
  return function(Tuple2$mouseXmouseY_167){
   return function(gol_168){
    return function(Preset$presetSnpresetNamepresetPattern_169){
     return function(seqColumn_170){
      return function(){
      switch(Tuple4$whlayoutWidthgameHeight_166[0]){
       case 'Tuple4':
       return function(){
       switch(Tuple2$mouseXmouseY_167[0]){
        case 'Tuple2':
        return function(){
        switch(Preset$presetSnpresetNamepresetPattern_169[0]){
         case 'Preset':
         return function(){
          var seqStep_180=function(){
          switch(seqColumn_170[0]){
           case 'Cons':
           switch(seqColumn_170[1][0]){
            case 'Tuple2':
            return seqColumn_170[1][1];
           }break;
           case 'Nil':
           return -1;
          }
          throw "Non-exhaustive pattern match in case";}();
          var seqView_181=sequencer_43(percent_2(Tuple4$whlayoutWidthgameHeight_166[4])(90))(percent_2(Tuple4$whlayoutWidthgameHeight_166[4])(90))(gol_168)(seqStep_180);
          return layers(['Cons',color(palColor1_3)(container(Tuple4$whlayoutWidthgameHeight_166[1])(Tuple4$whlayoutWidthgameHeight_166[2])(middle)(color(palColor21_5)(container(Tuple4$whlayoutWidthgameHeight_166[3])(Tuple4$whlayoutWidthgameHeight_166[4])(middle)(above(flow(right)(['Cons',golCtrl_41(percent_2(Tuple4$whlayoutWidthgameHeight_166[3])(12))(percent_2(Tuple4$whlayoutWidthgameHeight_166[4])(80)),['Cons',spacer(percent_2(Tuple4$whlayoutWidthgameHeight_166[3])(1))(percent_2(Tuple4$whlayoutWidthgameHeight_166[4])(80)),['Cons',seqView_181,['Cons',spacer(percent_2(Tuple4$whlayoutWidthgameHeight_166[3])(1))(percent_2(Tuple4$whlayoutWidthgameHeight_166[4])(80)),['Cons',presets_42(percent_2(Tuple4$whlayoutWidthgameHeight_166[3])(12))(percent_2(Tuple4$whlayoutWidthgameHeight_166[4])(80))(Preset$presetSnpresetNamepresetPattern_169[2]),['Nil']]]]]]))(synthCtrl_40((percent_2(Tuple4$whlayoutWidthgameHeight_166[3])(26)+percent_2(Tuple4$whlayoutWidthgameHeight_166[4])(90)))(percent_2(Tuple4$whlayoutWidthgameHeight_166[4])(8))))))),['Cons',asText(['Tuple5',Preset$presetSnpresetNamepresetPattern_169[1],Tuple4$whlayoutWidthgameHeight_166[1],Tuple4$whlayoutWidthgameHeight_166[2],Tuple2$mouseXmouseY_167[1],Tuple2$mouseXmouseY_167[2]]),['Nil']]]);}();
        }
        throw "Non-exhaustive pattern match in case";}();
       }
       throw "Non-exhaustive pattern match in case";}();
      }
      throw "Non-exhaustive pattern match in case";}();};};};};}
 var palColor1_3=rgb(51)(49)(48);
 var palColor12_4=rgb(71)(69)(68);
 var palColor21_5=rgb(30)(27)(32);
 var palColor22_6=rgb(55)(54)(56);
 var palColor31_7=rgb(71)(71)(68);
 var palColorAccent_8=rgb(255)(102)(0);
 var palColorBlink_9=rgba(222)(222)(222)(0.5);
 var golSpeed_10=500;
 var sequencerSteps_11=16;
 var sequencerSpeed_12=300;
 var host_15=lift(castJSStringToString)(jsHost_13);
 var presetSignal_21=sendGet(lift(castJSStringToString)(presetUrl_14));
 var presetSignal_21=function(){
  function deserializePattern_62(preset_66){
   return mapMaybe(function(obj_67){
    return getPoint_18(JSON.toList(getValue_19(obj_67)));})(JSON.findArray(Value.str('pattern'))(preset_66));}
  function deserializeName_63(preset_68){
   return JSON.findString(Value.str('name'))(preset_68);}
  function deserializeSn_64(preset_69){
   return JSON.findString(Value.str('sn'))(preset_69);}
  function deserializePreset_65(preset_70){
   return function(){
    var presetObj_71=handleResponse_20(preset_70);
    return Preset_17(deserializeSn_64(presetObj_71))(deserializeName_63(presetObj_71))(deserializePattern_62(presetObj_71));}();}
  return lift(deserializePreset_65)(presetSignal_21);}();
 var patternSignal_22=lift(function(Preset$__pattern_72){
  return function(){
  switch(Preset$__pattern_72[0]){
   case 'Preset':
   return Preset$__pattern_72[3];
  }
  throw "Non-exhaustive pattern match in case";}();})(presetSignal_21);
 var layoutDimensions_23=lift(function(Tuple2$wh_74){
  return function(){
  switch(Tuple2$wh_74[0]){
   case 'Tuple2':
   return ['Tuple4',Tuple2$wh_74[1],Tuple2$wh_74[2],div((7*Tuple2$wh_74[1]))(8),div((7*Tuple2$wh_74[2]))(8)];
  }
  throw "Non-exhaustive pattern match in case";}();})(dimensions);
 var seqMousePosition_24=lift2(function(Tuple4$wh_gameHeight_77){
  return function(Tuple2$mouseXmouseY_78){
   return function(){
   switch(Tuple4$wh_gameHeight_77[0]){
    case 'Tuple4':
    return function(){
    switch(Tuple2$mouseXmouseY_78[0]){
     case 'Tuple2':
     return ['Tuple2',((Tuple2$mouseXmouseY_78[1]-div(Tuple4$wh_gameHeight_77[1])(2))+percent_2(Tuple4$wh_gameHeight_77[4])(45)),((Tuple2$mouseXmouseY_78[2]-div(Tuple4$wh_gameHeight_77[2])(16))-percent_2(Tuple4$wh_gameHeight_77[4])(1))];
    }
    throw "Non-exhaustive pattern match in case";}();
   }
   throw "Non-exhaustive pattern match in case";}();};})(layoutDimensions_23)(Mouse.position);
 var cellClickCoord_25=lift(function(Tuple3$xygameHeight_84){
  return function(){
  switch(Tuple3$xygameHeight_84[0]){
   case 'Tuple3':
   return function(){
    var cellSize_88=div(percent_2(Tuple3$xygameHeight_84[3])(90))(sequencerSteps_11);
    return ['Tuple2',(1+div(Tuple3$xygameHeight_84[1])(cellSize_88)),(1+div(Tuple3$xygameHeight_84[2])(cellSize_88))];}();
  }
  throw "Non-exhaustive pattern match in case";}();})(sampleOn(clicks)(lift2(function(Tuple2$xy_89){
  return function(Tuple4$___gameHeight_90){
   return function(){
   switch(Tuple2$xy_89[0]){
    case 'Tuple2':
    return function(){
    switch(Tuple4$___gameHeight_90[0]){
     case 'Tuple4':
     return ['Tuple3',Tuple2$xy_89[1],Tuple2$xy_89[2],Tuple4$___gameHeight_90[4]];
    }
    throw "Non-exhaustive pattern match in case";}();
   }
   throw "Non-exhaustive pattern match in case";}();};})(seqMousePosition_24)(layoutDimensions_23)));
 var exploder_26=['Cons',['Tuple2',8,8],['Cons',['Tuple2',7,9],['Cons',['Tuple2',8,9],['Cons',['Tuple2',9,9],['Cons',['Tuple2',7,10],['Cons',['Tuple2',9,10],['Cons',['Tuple2',8,11],['Nil']]]]]]]];
 var cycleExploder_27=['Cons',['Tuple2',8,8],['Cons',['Tuple2',8,12],['Cons',['Tuple2',6,8],['Cons',['Tuple2',6,9],['Cons',['Tuple2',6,10],['Cons',['Tuple2',6,11],['Cons',['Tuple2',6,12],['Cons',['Tuple2',10,8],['Cons',['Tuple2',10,9],['Cons',['Tuple2',10,10],['Cons',['Tuple2',10,11],['Cons',['Tuple2',10,12],['Nil']]]]]]]]]]]]];
 var golAutomaton_28=function(){
  var gol_95=GameOfLife.fromList(cycleExploder_27);
  function fstep_94(input_96){
   return function(stateGol_97){
    return function(){
     var out_98=function(){
     switch(input_96[0]){
      case 'Cons':
      switch(input_96[2][0]){
       case 'Nil':
       return GameOfLife.insert(input_96[1])(stateGol_97);
      }break;
      case 'Nil':
      return GameOfLife.limit(GameOfLife.step(stateGol_97))(sequencerSteps_11);
     }
     return GameOfLife.fromList(input_96);}();
     return ['Tuple2',GameOfLife.toList(out_98),out_98];}();};}
  return init_(gol_95)(fstep_94);}();
 var Tuple2$golControlgolActive_29=checkbox(true);
 var golControl_30=function(){
 switch(Tuple2$golControlgolActive_29[0]){
  case 'Tuple2':
  return Tuple2$golControlgolActive_29[1];
 }
 throw "Non-exhaustive pattern match in case";}();
 var golActive_31=function(){
 switch(Tuple2$golControlgolActive_29[0]){
  case 'Tuple2':
  return Tuple2$golControlgolActive_29[2];
 }
 throw "Non-exhaustive pattern match in case";}();
 var mainGol_32=run(golAutomaton_28)(merge(merge(patternSignal_22)(lift(function(cell_104){
  return ['Cons',cell_104,['Nil']];})(cellClickCoord_25)))(keepWhen(golActive_31)(['Nil'])(lift(function(__105){
  return ['Nil'];})(every(golSpeed_10)))));
 var exportGol_34=lift(castPointListToJSArray_33)(mainGol_32);
 var sequencerAutomaton_35=function(){
  function fstep_110(input_111){
   return function(Tuple2$stateGolstateStep_112){
    return function(){
    switch(Tuple2$stateGolstateStep_112[0]){
     case 'Tuple2':
     return function(){
      var Tuple3$golstepnew_115=function(){
      switch(input_111[0]){
       case 'Nil':
       return ['Tuple3',Tuple2$stateGolstateStep_112[1],(1+mod(Tuple2$stateGolstateStep_112[2])(sequencerSteps_11)),true];
      }
      return ['Tuple3',input_111,Tuple2$stateGolstateStep_112[2],false];}();
      var gol_116=function(){
      switch(Tuple3$golstepnew_115[0]){
       case 'Tuple3':
       return Tuple3$golstepnew_115[1];
      }
      throw "Non-exhaustive pattern match in case";}();
      var step_117=function(){
      switch(Tuple3$golstepnew_115[0]){
       case 'Tuple3':
       return Tuple3$golstepnew_115[2];
      }
      throw "Non-exhaustive pattern match in case";}();
      var new_118=function(){
      switch(Tuple3$golstepnew_115[0]){
       case 'Tuple3':
       return Tuple3$golstepnew_115[3];
      }
      throw "Non-exhaustive pattern match in case";}();
      return ['Tuple2',['Tuple2',filter(function(Tuple2$x__128){
       return function(){
       switch(Tuple2$x__128[0]){
        case 'Tuple2':
        return eq(Tuple2$x__128[1],step_117);
       }
       throw "Non-exhaustive pattern match in case";}();})(gol_116),new_118],['Tuple2',gol_116,step_117]];}();
    }
    throw "Non-exhaustive pattern match in case";}();};}
  return init_(['Tuple2',['Nil'],0])(fstep_110);}();
 var sequencerSignal_36=lift(function(seq_130){
  return map(function(Tuple2$xy_131){
   return function(){
   switch(Tuple2$xy_131[0]){
    case 'Tuple2':
    return ['Tuple2',Tuple2$xy_131[1],(sequencerSteps_11-Tuple2$xy_131[2])];
   }
   throw "Non-exhaustive pattern match in case";}();})(fst(seq_130));})(keepIf(snd)(['Tuple2',['Nil'],true])(run(sequencerAutomaton_35)(merge(mainGol_32)(lift(function(__134){
  return ['Nil'];})(every(sequencerSpeed_12))))));
 var exportSequencer_37=lift(castPointListToJSArray_33)(sequencerSignal_36);
 var main_45=lift5(view_44)(layoutDimensions_23)(cellClickCoord_25)(mainGol_32)(presetSignal_21)(sequencerSignal_36);
 lift(function(v) { var e = document.createEvent('Event');e.initEvent('onGolStep', true, true);e.value = v;document.dispatchEvent(e); return v; })(exportGol_34);
 lift(function(v) { var e = document.createEvent('Event');e.initEvent('onSequencerStep', true, true);e.value = v;document.dispatchEvent(e); return v; })(exportSequencer_37);
 return {$op : {},
 placeholder:placeholder_0,
 repeat:repeat_1,
 percent:percent_2,
 palColor1:palColor1_3,
 palColor12:palColor12_4,
 palColor21:palColor21_5,
 palColor22:palColor22_6,
 palColor31:palColor31_7,
 palColorAccent:palColorAccent_8,
 palColorBlink:palColorBlink_9,
 golSpeed:golSpeed_10,
 sequencerSteps:sequencerSteps_11,
 sequencerSpeed:sequencerSpeed_12,
 jsHost:jsHost_13,
 presetUrl:presetUrl_14,
 host:host_15,
 presetSignal:presetSignal_21,
 Preset:Preset_17,
 getPoint:getPoint_18,
 getValue:getValue_19,
 handleResponse:handleResponse_20,
 presetSignal:presetSignal_21,
 patternSignal:patternSignal_22,
 layoutDimensions:layoutDimensions_23,
 seqMousePosition:seqMousePosition_24,
 cellClickCoord:cellClickCoord_25,
 exploder:exploder_26,
 cycleExploder:cycleExploder_27,
 golAutomaton:golAutomaton_28,
 Tuple2$golControlgolActive:Tuple2$golControlgolActive_29,
 golControl:golControl_30,
 golActive:golActive_31,
 mainGol:mainGol_32,
 castPointListToJSArray:castPointListToJSArray_33,
 exportGol:exportGol_34,
 sequencerAutomaton:sequencerAutomaton_35,
 sequencerSignal:sequencerSignal_36,
 exportSequencer:exportSequencer_37,
 gofCell:gofCell_38,
 noCell:noCell_39,
 synthCtrl:synthCtrl_40,
 golCtrl:golCtrl_41,
 presets:presets_42,
 sequencer:sequencer_43,
 view:view_44,
 main:main_45};}();
Elm.main=function(){
 return Elm.Main.main;};
} catch (e) {
Elm.main=function() {
var msg = ('<br/><h2>Your browser may not be supported. Are you using a modern browser?</h2>' + '<br/><span style="color:grey">Runtime Error in Main module:<br/>' + e + '<br/><br/>The problem may stem from an improper usage of:<br/>Failure, GameOfLife.fromList, GameOfLife.insert, GameOfLife.limit, GameOfLife.step, GameOfLife.toList, JSON.empty, JsonNumber, JsonObject, Success, Waiting, above, beside, checkbox, clicks, dimensions, every, fst, mapMaybe, sendGet, snd</span>');
document.body.innerHTML = Elm.Text.monospace(msg);throw e;};}</script><div id="widthChecker" style="width:100%; height:1px; position:absolute; top:-1px;"></div><div id="content"></div><script type="text/javascript">Dispatcher.initialize()</script><noscript><p>pattern</p><p>name</p><p>sn</p><p>Sythesizer controls</p><p>Gof controls</p><p>Active</p></noscript></body></html>